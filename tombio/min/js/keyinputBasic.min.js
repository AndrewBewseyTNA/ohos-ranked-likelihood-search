!function(l,f){"use strict";f.gui.keyInputBasic={width:360,otherState:{keys:[]}},f.gui.keyInputBasic.init=function(a){var t=l("<div>").attr("id","tombioKeyBasic").appendTo(a);f.gui.keyInputBasic.divSel="#tombioKeyBasic";var e={};for(var r in f.d.groupedCharacters.groups.forEach(function(a){e[a]=f.d.groupedCharacters[a]}),l("<button>").appendTo(t).text("Clear input").click(function(){f.d.characters.forEach(function(a){var t="#tbvKib"+a.Character;l(t).val(null),a.stateSet=!1,a.userInput=null}),f.f.refreshVisualisation()}),e){l("<div>").addClass("characterGroup").text(r).appendTo(t);for(var i=0;i<e[r].length;i++){var n=e[r][i],c=l("<div>").addClass("characterlabel").text(n.Label),s=l("<div>").append(c);t.append(s);var u="tbvKib"+n.Character;if("numeric"==n.ValueType){var o=l("<input>").attr("type","number").attr("id",u).addClass("numberControl").appendTo(s),d=n.Params.split(",");o.attr("min",d[0]).attr("max",d[1]).attr("step",d[2]);var h={id:u,char:n.Character};o.change(h,function(a){var t=l("#"+a.data.id).val();isNaN(t)||""==t?(f.d.oCharacters[a.data.char].userInput=null,f.d.oCharacters[a.data.char].stateSet=!1):(f.d.oCharacters[a.data.char].userInput=t,f.d.oCharacters[a.data.char].stateSet=!0),f.f.refreshVisualisation()})}else{var p=l("<select>").attr("id",u).addClass("characterSelect").appendTo(s);if("multi"==n.ControlType&&p.attr("multiple","multiple"),"single"==n.ControlType)l("<option>").text("").val("").appendTo(p);n.CharacterStateValues.forEach(function(a,t){l("<option>").text(a).val(t).appendTo(p)});h={id:u,char:n.Character};p.change(h,function(a){var t=[];l("#"+a.data.id+" option:selected").each(function(){""!=l(this).val()&&t.push(l(this).val())}),0<t.length?(f.d.oCharacters[a.data.char].userInput=t,f.d.oCharacters[a.data.char].stateSet=!0):(f.d.oCharacters[a.data.char].userInput=null,f.d.oCharacters[a.data.char].stateSet=!1),f.f.refreshVisualisation()})}}}f.f.checkInterface("keyInputBasic",f.templates.gui.keyInput,f.gui.keyInputBasic)},f.gui.keyInputBasic.initFromCharacterState=function(){f.d.characters.forEach(function(a){l("#tbvKib"+a.Character).val(a.stateSet?a.userInput:null)})},f.gui.keyInputBasic.initStateFromParams=function(a){this.initFromCharacterState()},f.gui.keyInputBasic.setParamsFromState=function(a){return a}}(jQuery,this.tombiovis);