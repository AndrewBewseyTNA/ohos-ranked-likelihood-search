!function(f,v){"use strict";v.gui.keyInputBasic={width:360,otherState:{keys:[]}},v.gui.keyInputBasic.init=function(a){var t=f("<div>").attr("id","tombioKeyBasic").appendTo(a);v.gui.keyInputBasic.divSel="#tombioKeyBasic";var e={},r=[];for(var i in v.d.characters.forEach(function(a){"key"==a.Status&&(e[a.Group]||(e[a.Group]=[],r.push(a.Group)),e[a.Group].push(a))}),f("<button>").appendTo(t).text("Clear input").click(function(){v.d.characters.forEach(function(a){var t="#tbvKib"+a.Character;f(t).val(null),a.stateSet=!1,a.userInput=null}),v.f.refreshVisualisation()}),e){f("<div>").addClass("characterGroup").text(i).appendTo(t);for(var n=0;n<e[i].length;n++){var c=e[i][n],s=f("<div>").addClass("characterlabel").text(c.Label),u=f("<div>").append(s);t.append(u);var o="tbvKib"+c.Character;if("numeric"==c.ValueType){var p=f("<input>").attr("type","number").attr("id",o).addClass("numberControl").appendTo(u),h=c.Params.split(",");p.attr("min",h[0]).attr("max",h[1]).attr("step",h[2]);var d={id:o,char:c.Character};p.change(d,function(a){var t=f("#"+a.data.id).val();isNaN(t)||""==t?(v.d.oCharacters[a.data.char].userInput=null,v.d.oCharacters[a.data.char].stateSet=!1):(v.d.oCharacters[a.data.char].userInput=t,v.d.oCharacters[a.data.char].stateSet=!0),v.f.refreshVisualisation()})}else{var l=f("<select>").attr("id",o).addClass("characterSelect").appendTo(u);if("multi"==c.ControlType&&l.attr("multiple","multiple"),"single"==c.ControlType)f("<option>").text("").val("").appendTo(l);c.CharacterStateValues.forEach(function(a,t){f("<option>").text(a).val(t).appendTo(l)});d={id:o,char:c.Character};l.change(d,function(a){var t=[];f("#"+a.data.id+" option:selected").each(function(){""!=f(this).val()&&t.push(f(this).val())}),0<t.length?(v.d.oCharacters[a.data.char].userInput=t,v.d.oCharacters[a.data.char].stateSet=!0):(v.d.oCharacters[a.data.char].userInput=null,v.d.oCharacters[a.data.char].stateSet=!1),v.f.refreshVisualisation()})}}}v.f.checkInterface("keyInputBasic",v.templates.gui.keyInput,v.gui.keyInputBasic)},v.gui.keyInputBasic.initFromCharacterState=function(){v.d.characters.forEach(function(a){f("#tbvKib"+a.Character).val(a.stateSet?a.userInput:null)})},v.gui.keyInputBasic.initStateFromParams=function(a){this.initFromCharacterState()},v.gui.keyInputBasic.setParamsFromState=function(a){return a}}(jQuery,this.tombiovis);