!function(c,m){"use strict";m.gui.main={},m.gui.main.setSelectedTool=function(i){c("#tombioGuiLargeVisualisation").val()!=i&&c("#tombioGuiLargeVisualisation").val(i)},m.gui.main.resizeControlsAndTaxa=function(){if(c("#tombioGuiLargeControls").is(":visible")){var i=c("#tombioGuiLargeControls").width();c("#tombioGuiLargeTaxa").css("margin-left",i+10);var o=c("#tombioGuiLargeControls").height();c("#tombioGuiLargeControlsAndTaxa").css("min-height",o+10)}else c("#tombioGuiLargeTaxa").css("margin-left",0),c("#tombioGuiLargeControlsAndTaxa").css("min-height","0px")},m.gui.main.init=function(){c("#tombiod3vis").html(""),c("#tombiod3vis").css("position","relative"),c("<div>").attr("id","tombioGuiLarge").css("display","none").appendTo("#tombiod3vis"),c("<div>").attr("id","tombioGuiLargeDialog").css("padding","1em").css("display","none").css("position","absolute").css("background-color","white").css("border","5px solid black").css("width","100%").css("z-index","5000").css("z-index","5000").appendTo("#tombioGuiLarge"),c("<button>").text("Close").appendTo(c("#tombioGuiLargeDialog")).on("click",function(){c("#tombioGuiLargeDialog").hide()}),c("<div>").attr("id","tombioGuiLargeDialogTitle").appendTo(c("#tombioGuiLargeDialog")),c("<div>").attr("id","tombioGuiLargeDialogContents").appendTo(c("#tombioGuiLargeDialog")),c("<select>").attr("id","tombioGuiLargeVisualisation").appendTo("#tombioGuiLarge"),c("<div>").addClass("tombioNoSelect").attr("id","tombioGuiLargeControlsAndTaxa").appendTo("#tombioGuiLarge"),c("<div>").attr("id","tombioGuiLargeControls").appendTo("#tombioGuiLargeControlsAndTaxa"),c("<div>").attr("id","tombioGuiLargeTaxa").appendTo("#tombioGuiLargeControlsAndTaxa"),c("<div>").attr("id","currentVisInfo").css("display","none").appendTo("#tombioGuiLarge"),c("<div>").attr("id","kbInfo").css("display","none").appendTo("#tombioGuiLarge"),c("<div>").attr("id","visInfo").css("display","none").appendTo("#tombioGuiLarge"),c("<div>").attr("id","tombioCitation").css("display","none").appendTo("#tombioGuiLarge"),c("<div>").attr("id","mediaFilesCheck").css("display","none").appendTo("#tombioGuiLarge"),c("<div>").attr("id","tvkCheck").css("display","none").appendTo("#tombioGuiLarge"),m.gui.main.divVis="#tombioGuiLargeTaxa",m.gui.main.divInput="#tombioGuiLargeControls",m.f.checkInterface("guiLarge",m.templates.gui.main,m.gui.main)},m.gui.main.createUIControls=function(){c("#tombioGuiLarge").css("display","");var t=[];t.push(c('<option value="reload" class="html" data-class="reload">Reload</option>')),t.push(c('<option value="reloadGuiOnsen" class="html" data-class="reload">Reload with mobile-first interface</option>')),t.push(c('<option value="reloadGuiJQuery" class="html" data-class="reload">Reload with large format interface</option>')),m.v.includedVisualisations.forEach(function(i,o){var a=c('<option class="needsclick">').attr("value",i).attr("data-class","vis").addClass("visualisation").text(m.js.jsFiles[i].toolName);t.push(a)}),t.push(c('<option id="optCurrentVisInfo" value="currentVisInfo" class="html" data-class="info"></option>')),t.push(c('<option value="kbInfo" class="html" data-class="info">About the Knowledge-base</option>')),t.push(c('<option value="visInfo" class="html" data-class="info">About FSC Identikit</option>')),t.push(c('<option value="tombioCitation" class="html" data-class="info">Get citation text</option>')),m.opts.checkKB&&(t.push(c('<option value="mediaFilesCheck" class="html" data-class="wrench">Check media files</option>')),m.d.oCharacters.TVK&&t.push(c('<option value="tvkCheck" class="html" data-class="wrench">Check TVKs</option>'))),t.forEach(function(i){i.attr("value")==m.v.selectedTool&&i.attr("selected","selected")}),c("#tombioGuiLargeVisualisation").append(t),c("#tombioGuiLargeVisualisation").change(function(){m.f.visChanged(c("#tombioGuiLargeVisualisation").val())}),1==m.opts.hideVisDropdown&&c("#tombioGuiLargeVisualisation-button").hide()},m.gui.main.visShow=function(i){var o=m.v.visualisations[i];if("tombioCitation"==i&&c("#tombioCitation").html(m.f.createCitationPage()),"mediaFilesCheck"==i&&c("#mediaFilesCheck").html(m.f.createMediaCheckPage()),"tvkCheck"==i&&c("#tvkCheck").html(m.f.createTvkCheckPage()),"kbInfo"==i&&0==c("#kbInfo").html().length&&m.f.setKbInfo(c("#kbInfo")),"visInfo"==i&&0==c("#visInfo").html().length&&m.f.setVisInfo(c("#visInfo")),"currentVisInfo"==i&&(c("#currentVisInfo").html(""),m.f.setSelectedToolInfo(c("#currentVisInfo"))),console.log("selectedToolName",i),i!=m.v.currentTool&&(m.v.currentTool&&(m.v.visualisations[m.v.currentTool]?m.v.visualisations[m.v.currentTool].hide():c("#"+m.v.currentTool).hide()),m.v.visualisations[i]?m.v.visualisations[i].show():c("#"+i).show()),o?c("#tombioGuiLargeControlsAndTaxa").show():c("#tombioGuiLargeControlsAndTaxa").hide(),m.f.refreshVisualisation(),m.v.currentTool=i,-1<Object.keys(m.v.visualisations).indexOf(i)&&(m.v.lastVis=i,c("#optCurrentVisInfo").text("Using the "+m.v.visualisations[m.v.lastVis].metadata.title)),!m.v.initialised&&m.v.visualisations[i]){for(var a={},t=decodeURI(window.location.search.substring(1)).replace(/\+/g," ").split("&"),e=0;e<t.length;e++){var n=t[e].split("=");a[n[0]]=n[1]}m.v.visualisations[i].urlParams(a),m.v.initialised=!0}},m.gui.main.showFullDetails=function(i){var o=m.f.getTaxonCharacterValues(m.d.oTaxa[i]),a=c("<div>");if(m.f.addTaxonImagesToContainer({taxon:i,container:a,height:300}),m.d.oCharacters.TVK&&m.d.oTaxa[i].TVK){var t=c("<div>").css("position","relative");m.f.addNBNMapToContainer(m.d.oTaxa[i].TVK,t)}var e=c("<div>"),n=m.f.getTaxonHtmlFiles(i);if(0==n.length)e.text("No text information files (HTML) are specified in the knowledge-base for this taxon.");else{if(1<n.length){var s=c("<select id='tombioFileSelect'></select>").appendTo(e);n.forEach(function(i,o){var a=c("<option/>").text(i.Caption).attr("value",o);s.append(a)}),s.change(function(){m.f.addTaxonHtmlToContainer(i,l,c(this).val())})}var l=c("<div>").appendTo(e);m.f.addTaxonHtmlToContainer(i,l,0)}var r,d,u=c("<div>");u.append(o),u.append(a),u.append(e),t&&u.append(t),r=u,d=c("<div style='background-color: white; position: absolute; z-index: 50000; padding: 20px'>"),c("body").prepend(d),d.html(null),c("<button>").text("Dismiss").appendTo(d).click(function(){d.hide()}),d.append(r),d.show()},m.gui.main.createCharacterTooltips=function(i){},m.gui.main.createTaxonToolTips=function(i,o){},m.gui.main.tooltip=function(i){},m.gui.main.dialog=function(i,o){c("#tombioGuiLargeDialogTitle").text(i),c("#tombioGuiLargeDialogContents").html(o),c("#tombioGuiLargeDialog").show()},m.gui.main.contextMenu={},m.gui.main.contextMenu.addItem=function(){},m.gui.main.contextMenu.removeItem=function(){}}(jQuery,this.tombiovis);