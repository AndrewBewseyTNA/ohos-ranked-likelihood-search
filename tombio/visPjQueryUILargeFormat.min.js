(function(n,t){"use strict";var i=t.v.visPjQueryUILargeFormat=Object.create(t.v.visP);i.createFullDetailsDialog=function(i,r,u,f){function b(){var n=o.find(".tombio-galleria-pane").first();n.data("galleria")&&(n.data("galleria").setOptions("height",o.height()-v),n.data("galleria").resize())}function d(t,i){var u=n("<div>").appendTo(i),f=h.getTaxonHtmlFiles(t),o,r,s,e;f.length==0?(o=n("<div>").css("margin","10px").appendTo(u),o.text("No text information files (HTML) are specified in the knowledge-base for this taxon.")):(r=n("<div>"),f.length>1&&(s=n('<div style="margin-bottom: 20px">').appendTo(u),e=n("<select id='tombioFileSelect'><\/select>").appendTo(s),f.forEach(function(t,i){var r=n("<option/>").text(t.Caption).attr("value",i);e.append(r)}),e.selectmenu({change:function(n,i){h.addTaxonHtmlToContainer(t,r,i.item.value)}})),r.appendTo(u),h.addTaxonHtmlToContainer(t,r,0))}var h=this,v,e,s,c,l,y,a,o,p,k,w;u=typeof u!="undefined"?u:0;f=typeof f!="undefined"?f:0;r=typeof r!="undefined"?r:1;e=n("<div>").addClass("tombioFullDetailsTabs");e.css("border","none");s=n("<ul>").appendTo(e);s.append("<li><a href='#tabs-1'>Knowledge-base<\/a><\/li>");s.append("<li><a href='#tabs-2'>Images<\/a><\/li>");t.d.oCharacters.TVK&&s.append("<li><a href='#tabs-4'>NBN map<\/a><\/li>");s.append("<li><a href='#tabs-3'>Details<\/a><\/li>");c=n("<div>").attr("id","tabs-1").appendTo(e);l=n("<div>").attr("id","tabs-2").appendTo(e);t.d.oCharacters.TVK&&(y=n("<div>").attr("id","tabs-4").appendTo(e));a=n("<div>").attr("id","tabs-3").appendTo(e);o=n("<div>").append(e);o.attr("title",i);o.dialog({closeText:"",height:550,width:600,modal:!0,resizeStop:function(){e.tabs("refresh");b()}});e.tabs({heightStyle:"fill",active:r,create:function(){v=o.height()-c.height()},activate:function(n,t){e.tabs("refresh");t.newTab.index()==1&&b()}});a.css("overflow","hidden");p=this.getTaxonCharacterValues(t.d.oTaxa[i]);c.append(p);k=this.addTaxonImagesToContainer({taxon:i,container:l,height:l.height()});t.d.oCharacters.TVK&&t.d.oTaxa[i].TVK&&(w=n("<div>").css("position","relative").appendTo(y),h.addNBNMapToContainer(t.d.oTaxa[i].TVK,w));d(i,a)};i.createCharacterScoreDialog=function(t,i){var u=this.getCharacterScoreDetails(t,i),r=n("<div>");r.dialog({height:300,width:600,modal:!0,title:"Character score details"});r.html(u);r.dialog("open")}})(jQuery,this.tombiovis);