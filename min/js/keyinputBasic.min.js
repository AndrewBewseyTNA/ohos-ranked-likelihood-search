!function(v,f){"use strict";f.gui.keyInputBasic={width:360,otherState:{keys:[]}},f.gui.keyInputBasic.init=function(t){var a=v("<div>").attr("id","tombioKeyBasic").appendTo(t);f.gui.keyInputBasic.divSel="#tombioKeyBasic";var e={},r=[];for(var i in f.d.characters.forEach(function(t){"key"==t.Status&&(e[t.Group]||(e[t.Group]=[],r.push(t.Group)),e[t.Group].push(t))}),v("<button>").appendTo(a).text("Clear input").click(function(){f.d.characters.forEach(function(t){var a="#tbvKib"+t.Character;v(a).val(null),t.stateSet=!1,t.userInput=null}),f.f.refreshVisualisation()}),e){v("<div>").addClass("characterGroup").text(i).appendTo(a);for(var n=0;n<e[i].length;n++){var s=e[i][n],c=v("<div>").addClass("characterlabel").text(s.Label),u=v("<div>").append(c);a.append(u);var o="tbvKib"+s.Character;if("numeric"==s.ValueType){var p=v("<input>").attr("type","number").attr("id",o).addClass("numberControl").appendTo(u),h=s.Params.split(",");p.attr("min",h[0]).attr("max",h[1]).attr("step",h[2]);var d={id:o,char:s.Character};p.change(d,function(t){var a=v("#"+t.data.id).val();isNaN(a)||""==a?(f.d.oCharacters[t.data.char].userInput=null,f.d.oCharacters[t.data.char].stateSet=!1):(f.d.oCharacters[t.data.char].userInput=a,f.d.oCharacters[t.data.char].stateSet=!0),f.f.refreshVisualisation()})}else{var l=v("<select>").attr("id",o).addClass("characterSelect").appendTo(u);if("multi"==s.ControlType&&l.attr("multiple","multiple"),"single"==s.ControlType)v("<option>").text("").val("").appendTo(l);s.CharacterStateValues.forEach(function(t,a){v("<option>").text(t).val(a).appendTo(l)});d={id:o,char:s.Character};l.change(d,function(t){var a=[];v("#"+t.data.id+" option:selected").each(function(){""!=v(this).val()&&a.push(v(this).val())}),0<a.length?(f.d.oCharacters[t.data.char].userInput=a,f.d.oCharacters[t.data.char].stateSet=!0):(f.d.oCharacters[t.data.char].userInput=null,f.d.oCharacters[t.data.char].stateSet=!1),f.f.refreshVisualisation()})}}}f.f.checkInterface("keyInputBasic",f.templates.gui.keyInput,f.gui.keyInputBasic)},f.gui.keyInputBasic.initFromCharacterState=function(){f.d.characters.forEach(function(t){v("#tbvKib"+t.Character).val(t.stateSet?t.userInput:null)})},f.gui.keyInputBasic.initStateFromParams=function(t){this.initFromCharacterState()},f.gui.keyInputBasic.setParamsFromState=function(t){return t}}(jQuery,this.tombiovis.templates.loading?this.tombiovis.templates:this.tombiovis);